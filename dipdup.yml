spec_version: 1.2
package: eth_usdt


datasources:
  ethscan:
    kind: abi.etherscan

  subsquid_eth_mainnet:
    kind: evm.subsquid
    # url: ${ARCHIVE_URI:-https://v2.archive.subsquid.io/network/ethereum-mainnet}
    url: ${ARCHIVE_URI:-https://eth.archive.subsquid.io}
    # url: ${ARCHIVE_URI:-http://127.0.0.1:8080}
    node_url: ${INFURA_URI:-}

contracts:
  eth_usdt:
    kind: evm
    address: 0xdac17f958d2ee523a2206206994597c13d831ec7
    typename: eth_usdt

indexes:
  # usdt_swaps:
  #   kind: evm.subsquid.operations
  #   datasource: subsquid_eth_mainnet
  #   handlers:
  #     - callback: on_transfer_ownership
  #       contract: eth_usdt
  #       method: transferOwnership
  #       events:  # unordered list of possible events (not mandatory)
  #         - contract: usdt_router_mainnet
  #           name: NewTrade
  #         - contract: token
  #           name: Transfer
  eth_usdt_events:
    kind: evm.subsquid.events
    datasource: subsquid_eth_mainnet
    handlers:
      - callback: on_transfer
        contract: eth_usdt
        name: Transfer
    first_level: 16_000_000
    last_level: 16_744_000

logging: verbose