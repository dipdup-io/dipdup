spec_version: 1.2
package: eth_usdt

datasources:
  ethscan:
    kind: abi.etherscan

  subsquid_eth_mainnet:
    kind: evm.subsquid
    url: ${ARCHIVE_URI:-https://eth.archive.subsquid.io}
    node_url: ${INFURA_URI:-}

contracts:
  eth_usdt:
    kind: evm
    address: 0xdac17f958d2ee523a2206206994597c13d831ec7
    typename: eth_usdt

indexes:
  # usdt_swaps:
  #   kind: evm.subsquid.operations  # evm.digdug.operations, tezos.tzkt.operations
  #   datasource: subsquid_eth_mainnet
  #   handlers:
  #     - callback: on_multicall
  #       contract: usdt_router_mainnet
  #       method: multicall  # multicall(int256)
  #       events:  # unordered list of possible events (not mandatory)
  #         - contract: usdt_router_mainnet
  #           name: NewTrade
  #         - contract: token
  #           name: Transfer
  eth_usdt_events:
    kind: evm.subsquid.events
    datasource: subsquid_eth_mainnet
    handlers:
      - callback: on_transfer
        contract: eth_usdt
        name: Transfer
