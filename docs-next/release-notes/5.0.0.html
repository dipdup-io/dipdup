<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js coal">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>5.0.0 - DipDup Documentation</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../book.css">
        <link rel="stylesheet" href="../mdbook-admonish.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <!-- NOTE: Fixed coal -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "coal";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('coal')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="../quickstart.html"><strong aria-hidden="true">1.</strong> Quickstart</a></li><li class="chapter-item expanded "><a href="../getting-started/index.html"><strong aria-hidden="true">2.</strong> Getting started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/installation.html"><strong aria-hidden="true">2.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="../getting-started/core-concepts.html"><strong aria-hidden="true">2.2.</strong> Core concepts</a></li><li class="chapter-item expanded "><a href="../getting-started/creating-config.html"><strong aria-hidden="true">2.3.</strong> Creating config</a></li><li class="chapter-item expanded "><a href="../getting-started/project-structure.html"><strong aria-hidden="true">2.4.</strong> Project structure</a></li><li class="chapter-item expanded "><a href="../getting-started/defining-models.html"><strong aria-hidden="true">2.5.</strong> Defining models</a></li><li class="chapter-item expanded "><a href="../getting-started/implementing-handlers.html"><strong aria-hidden="true">2.6.</strong> Implementing handlers</a></li><li class="chapter-item expanded "><a href="../getting-started/templates-and-variables.html"><strong aria-hidden="true">2.7.</strong> Templates and variables</a></li></ol></li><li class="chapter-item expanded "><a href="../indexes/index.html"><strong aria-hidden="true">3.</strong> Indexes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../indexes/big_map.html"><strong aria-hidden="true">3.1.</strong> Big map keys</a></li><li class="chapter-item expanded "><a href="../indexes/event.html"><strong aria-hidden="true">3.2.</strong> Contract events</a></li><li class="chapter-item expanded "><a href="../indexes/head.html"><strong aria-hidden="true">3.3.</strong> Head blocks</a></li><li class="chapter-item expanded "><a href="../indexes/operation.html"><strong aria-hidden="true">3.4.</strong> Operations</a></li><li class="chapter-item expanded "><a href="../indexes/token_transfer.html"><strong aria-hidden="true">3.5.</strong> Token transfers</a></li></ol></li><li class="chapter-item expanded "><a href="../graphql/index.html"><strong aria-hidden="true">4.</strong> GraphQL API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../graphql/hasura.html"><strong aria-hidden="true">4.1.</strong> Hasura integration</a></li><li class="chapter-item expanded "><a href="../graphql/rest.html"><strong aria-hidden="true">4.2.</strong> REST endpoints</a></li><li class="chapter-item expanded "><a href="../graphql/genql.html"><strong aria-hidden="true">4.3.</strong> GenQL</a></li></ol></li><li class="chapter-item expanded "><a href="../advanced/index.html"><strong aria-hidden="true">5.</strong> Advanced usage</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../advanced/datasources.html"><strong aria-hidden="true">5.1.</strong> Datasources</a></li><li class="chapter-item expanded "><a href="../advanced/hooks.html"><strong aria-hidden="true">5.2.</strong> Hooks</a></li><li class="chapter-item expanded "><a href="../advanced/event-hooks.html"><strong aria-hidden="true">5.3.</strong> Event hooks</a></li><li class="chapter-item expanded "><a href="../advanced/jobs.html"><strong aria-hidden="true">5.4.</strong> Job scheduler</a></li><li class="chapter-item expanded "><a href="../advanced/reindexing.html"><strong aria-hidden="true">5.5.</strong> Reindexing</a></li><li class="chapter-item expanded "><a href="../advanced/feature-flags.html"><strong aria-hidden="true">5.6.</strong> Feature flags</a></li><li class="chapter-item expanded "><a href="../advanced/sql.html"><strong aria-hidden="true">5.7.</strong> SQL scripts</a></li><li class="chapter-item expanded "><a href="../advanced/performance.html"><strong aria-hidden="true">5.8.</strong> Improving performance</a></li><li class="chapter-item expanded "><a href="../advanced/context.html"><strong aria-hidden="true">5.9.</strong> Callback context (ctx)</a></li><li class="chapter-item expanded "><a href="../advanced/internal-models.html"><strong aria-hidden="true">5.10.</strong> Internal models</a></li><li class="chapter-item expanded "><a href="../advanced/index-factories.html"><strong aria-hidden="true">5.11.</strong> Index factories</a></li><li class="chapter-item expanded "><a href="../advanced/metadata-interface.html"><strong aria-hidden="true">5.12.</strong> Metadata interface</a></li></ol></li><li class="chapter-item expanded "><a href="../deployment/index.html"><strong aria-hidden="true">6.</strong> Deployment and operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../deployment/database-engines.html"><strong aria-hidden="true">6.1.</strong> Database engines</a></li><li class="chapter-item expanded "><a href="../deployment/docker.html"><strong aria-hidden="true">6.2.</strong> Running in Docker</a></li><li class="chapter-item expanded "><a href="../deployment/sentry.html"><strong aria-hidden="true">6.3.</strong> Sentry integration</a></li><li class="chapter-item expanded "><a href="../deployment/prometheus.html"><strong aria-hidden="true">6.4.</strong> Prometheus integration</a></li><li class="chapter-item expanded "><a href="../deployment/logging.html"><strong aria-hidden="true">6.5.</strong> Logging</a></li><li class="chapter-item expanded "><a href="../deployment/backups.html"><strong aria-hidden="true">6.6.</strong> Backup and restore</a></li><li class="chapter-item expanded "><a href="../deployment/monitoring.html"><strong aria-hidden="true">6.7.</strong> Monitoring</a></li></ol></li><li class="chapter-item expanded "><a href="../faq.html"><strong aria-hidden="true">7.</strong> F.A.Q.</a></li><li class="chapter-item expanded "><a href="../troubleshooting.html"><strong aria-hidden="true">8.</strong> Troubleshooting</a></li><li class="chapter-item expanded affix "><li class="part-title">Examples</li><li class="chapter-item expanded "><a href="../examples/demo-projects.html"><strong aria-hidden="true">9.</strong> Demo projects</a></li><li class="chapter-item expanded "><a href="../examples/built-with-dipdup.html"><strong aria-hidden="true">10.</strong> Built with DipDup</a></li><li class="chapter-item expanded affix "><li class="part-title">Standalone Services</li><li class="chapter-item expanded "><a href="../services/mempool.html"><strong aria-hidden="true">11.</strong> mempool</a></li><li class="chapter-item expanded "><a href="../services/metadata.html"><strong aria-hidden="true">12.</strong> metadata</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="../cli-reference.html"><strong aria-hidden="true">13.</strong> Command-line reference</a></li><li class="chapter-item expanded "><a href="../config/index.html"><strong aria-hidden="true">14.</strong> Config file reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../config/reference.html"><strong aria-hidden="true">14.1.</strong> Full reference</a></li><li class="chapter-item expanded "><a href="../config/advanced.html"><strong aria-hidden="true">14.2.</strong> advanced</a></li><li class="chapter-item expanded "><a href="../config/contracts.html"><strong aria-hidden="true">14.3.</strong> contracts</a></li><li class="chapter-item expanded "><a href="../config/custom.html"><strong aria-hidden="true">14.4.</strong> custom</a></li><li class="chapter-item expanded "><a href="../config/database.html"><strong aria-hidden="true">14.5.</strong> database</a></li><li class="chapter-item expanded "><a href="../config/datasources.html"><strong aria-hidden="true">14.6.</strong> datasources</a></li><li class="chapter-item expanded "><a href="../config/hasura.html"><strong aria-hidden="true">14.7.</strong> hasura</a></li><li class="chapter-item expanded "><a href="../config/hooks.html"><strong aria-hidden="true">14.8.</strong> hooks</a></li><li class="chapter-item expanded "><a href="../config/indexes.html"><strong aria-hidden="true">14.9.</strong> indexes</a></li><li class="chapter-item expanded "><a href="../config/jobs.html"><strong aria-hidden="true">14.10.</strong> jobs</a></li><li class="chapter-item expanded "><a href="../config/logging.html"><strong aria-hidden="true">14.11.</strong> logging</a></li><li class="chapter-item expanded "><a href="../config/package.html"><strong aria-hidden="true">14.12.</strong> package</a></li><li class="chapter-item expanded "><a href="../config/prometheus.html"><strong aria-hidden="true">14.13.</strong> prometheus</a></li><li class="chapter-item expanded "><a href="../config/sentry.html"><strong aria-hidden="true">14.14.</strong> sentry</a></li><li class="chapter-item expanded "><a href="../config/spec_version.html"><strong aria-hidden="true">14.15.</strong> spec_version</a></li><li class="chapter-item expanded "><a href="../config/templates.html"><strong aria-hidden="true">14.16.</strong> templates</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">What's New</li><li class="chapter-item expanded "><a href="../CHANGELOG.html"><strong aria-hidden="true">15.</strong> Changelog</a></li><li class="chapter-item expanded "><a href="../release-notes/index.html"><strong aria-hidden="true">16.</strong> Release notes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../release-notes/6.2.0.html"><strong aria-hidden="true">16.1.</strong> 6.2.0</a></li><li class="chapter-item expanded "><a href="../release-notes/6.0.0.html"><strong aria-hidden="true">16.2.</strong> 6.0.0</a></li><li class="chapter-item expanded "><a href="../release-notes/5.1.0.html"><strong aria-hidden="true">16.3.</strong> 5.1.0</a></li><li class="chapter-item expanded "><a href="../release-notes/5.0.0.html" class="active"><strong aria-hidden="true">16.4.</strong> 5.0.0</a></li><li class="chapter-item expanded "><a href="../release-notes/4.2.0.html"><strong aria-hidden="true">16.5.</strong> 4.2.0</a></li><li class="chapter-item expanded "><a href="../release-notes/4.1.0.html"><strong aria-hidden="true">16.6.</strong> 4.1.0</a></li><li class="chapter-item expanded "><a href="../release-notes/4.0.0.html"><strong aria-hidden="true">16.7.</strong> 4.0.0</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Community</li><li class="chapter-item expanded "><a href="../CONTRIBUTING.html"><strong aria-hidden="true">17.</strong> Contribution guide</a></li><li class="chapter-item expanded "><a href="../LICENSE.html"><strong aria-hidden="true">18.</strong> MIT License</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-button">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <div id="theme-list" class="hidden"></div>

                        <script type="text/javascript">
                            var theme_toggle = document.getElementById('theme-toggle');

                            function toggleTheme() {
                                var html = document.querySelector('html');
                                var theme = html.classList.contains('coal') ? 'light' : 'coal';
                                html.classList.remove('light');
                                html.classList.remove('coal');
                                html.classList.add(theme);
                                try { localStorage.setItem('mdbook-theme', theme); } catch(e) { }
                            }

                            theme_toggle.addEventListener('click', toggleTheme);
                        </script>
                        <a class="icon-button" id="stable">stable</a>
                        <a class="icon-button" id="latest">latest</a>
                        <script type="text/javascript">
                            stable_a = document.getElementById("stable");
                            latest_a = document.getElementById("latest");
                            if (window.location.href.includes("docs.")) {
                                stable_a.style.color = "dimgray";
                                latest_a.setAttribute('href', window.location.href.replace('docs.', 'docs-next.'));
                            }
                            else if (window.location.href.includes('docs-next.')) {
                                latest_a.style.color = "dimgray";
                                stable_a.setAttribute('href', window.location.href.replace('docs-next.', 'docs.'));
                            }
                        </script>

                    </div>

                    <div class="menu-title">
                        <img class="logo" src="..//theme/header.png" alt="DipDup logo" />
                    </div>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/dipdup-io/dipdup.git" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="500"><a class="header" href="#500">5.0.0</a></h1>
<h2 id="-breaking-changes"><a class="header" href="#-breaking-changes">âš  Breaking Changes</a></h2>
<ul>
<li>Python versions 3.8 and 3.9 are no longer supported.</li>
<li><code>bcd</code> datasource has been removed.</li>
<li>Two internal tables were added, <code>dipdup_contract_metadata</code> and <code>dipdup_token_metadata</code>.</li>
<li>Some methods of <code>tzkt</code> datasource have changed their signatures and behavior.</li>
<li>Dummy <code>advanced.oneshot</code> config flag has been removed.</li>
<li>Dummy <code>schema approve --hashes</code> command flag has been removed.</li>
<li><code>docker init</code> command has been removed.</li>
<li><code>ReindexingReason</code> enumeration items have been changed.</li>
</ul>
<h2 id="migration-from-4x"><a class="header" href="#migration-from-4x">Migration from 4.x</a></h2>
<ul>
<li>Ensure that you have a <code>python = &quot;^3.10&quot;</code> dependency in <code>pyproject.toml</code>.</li>
<li>Remove <code>bcd</code> datasources from config. Use <code>metadata</code> datasource instead to fetch contract and token metadata.</li>
<li>Update <code>tzkt</code> datasource method calls as described below.</li>
<li>Run the <code>dipdup schema approve</code> command on every database you use with 5.0.0.</li>
<li>Update usage of <code>ReindexingReason</code> enumeration if needed.</li>
</ul>
<h2 id="whats-new"><a class="header" href="#whats-new">What's New</a></h2>
<h3 id="process-realtime-messages-with-lag"><a class="header" href="#process-realtime-messages-with-lag">Process realtime messages with lag</a></h3>
<p>Chain reorgs have occurred much recently since the Ithaca protocol reached mainnet. The preferable way to deal with rollbacks is the <code>on_rollback</code> hook. But if the logic of your indexer is too complex, you can buffer an arbitrary number of levels before processing to avoid reindexing.</p>
<pre><code class="language-yaml">datasources:
  tzkt_mainnet:
    kind: tzkt
    url: https://api.tzkt.io
    buffer_size: 2
</code></pre>
<p>DipDup tries to remove backtracked operations from the buffer instead emitting rollback. Ithaca guarantees operations finality after one block and blocks finality after two blocks, so to completely avoid reorgs, <code>buffer_size</code> should be 2.</p>
<h3 id="bcd-api-takedown"><a class="header" href="#bcd-api-takedown">BCD API takedown</a></h3>
<p>Better Call Dev API was officially deprecated in February. Thus, it's time to go for <code>bcd</code> datasource. In DipDup, it served the only purpose of fetching contract and token metadata. Now there's a separate <code>metadata</code> datasource which do the same thing but better. If you have used <code>bcd</code> datasource for custom requests, see <a href="https://baking-bad.org/blog/2022/02/15/migrating-from-bcd-api-to-tzkt-api/">How to migrate from BCD to TzKT API</a> article.</p>
<h3 id="tzkt-batch-request-pagination"><a class="header" href="#tzkt-batch-request-pagination">TzKT batch request pagination</a></h3>
<p>Historically, most <code>TzktDatasource</code> methods had a page iteration logic hidden inside. The quantity of items returned by TzKT in a single request is configured in <code>HTTPConfig.batch_size</code> and defaulted to 10.000. Before this release, three requests would be performed by the <code>get_big_map</code> method to fetch 25.000 big map keys, leading to performance degradation and extensive memory usage.</p>
<div class="table-wrapper"><table><thead><tr><th>affected method</th><th>response size in 4.x</th><th>response size in 5.x</th></tr></thead><tbody>
<tr><td><code>get_similar_contracts</code></td><td>unlimited</td><td>max. <code>datasource.request_limit</code></td></tr>
<tr><td><code>get_originated_contracts</code></td><td>unlimited</td><td>max. <code>datasource.request_limit</code></td></tr>
<tr><td><code>get_big_map</code></td><td>unlimited</td><td>max. <code>datasource.request_limit</code></td></tr>
<tr><td><code>get_contract_big_maps</code></td><td>unlimited</td><td>max. <code>datasource.request_limit</code></td></tr>
<tr><td><code>get_quotes</code></td><td>first <code>datasource.request_limit</code></td><td>max. <code>datasource.request_limit</code></td></tr>
</tbody></table>
</div>
<p>All paginated methods now behave the same way. You can either iterate over pages manually or use <code>iter_...</code> helpers.</p>
<pre><code class="language-python">datasource = ctx.get_tzkt_datasource('tzkt_mainnet')
batch_iter = datasource.iter_big_map(
    big_map_id=big_map_id,
    level=last_level,
)
async for key_batch in batch_iter:
    for key in key_batch:
        ...
</code></pre>
<h3 id="metadata-interface-for-tzkt-integration"><a class="header" href="#metadata-interface-for-tzkt-integration">Metadata interface for TzKT integration</a></h3>
<p>Starting with 5.0 you can store and expose custom contract and token metadata in the same format DipDup Metadata service does for TZIP-compatible metadata.</p>
<p>Enable this feature with <code>advanced.metadata_interface</code> flag, then update metadata in any callback:</p>
<pre><code class="language-python">await ctx.update_contract_metadata(
    network='mainnet',
    address='KT1...',
    metadata={'foo': 'bar'},
)
</code></pre>
<p>Metadata stored in <code>dipdup_contract_metadata</code> and <code>dipdup_token_metadata</code> tables and available via GraphQL and REST APIs.</p>
<h3 id="prometheus-integration"><a class="header" href="#prometheus-integration">Prometheus integration</a></h3>
<p>This version introduces initial Prometheus integration. It could help you set up monitoring, find performance issues in your code, and so on. To enable this integration, add the following lines to the config:</p>
<pre><code class="language-yaml">prometheus:
  host: 0.0.0.0
</code></pre>
<div id="admonition-see-also" class="admonition info">
<div class="admonition-title">
<p>See Also</p>
<p><a class="admonition-anchor-link" href="#admonition-see-also"></a></p>
</div>
<div>
<ul>
<li><a href="https://docs-next.dipdup.io/config/prometheus.html">14.13. prometheus</a></li>
<li><a href="https://docs-next.dipdup.io/deployment/prometheus.html">6.4. Prometheus integration</a></li>
</ul>
</div>
</div>
<h2 id="changes-since-427"><a class="header" href="#changes-since-427">Changes since 4.2.7</a></h2>
<h3 id="added"><a class="header" href="#added">Added</a></h3>
<ul>
<li>config: Added <code>custom</code> section to store arbitrary user data.</li>
<li>metadata: Added <code>metadata_interface</code> feature flag to expose metadata in TzKT format.</li>
<li>prometheus: Added ability to expose Prometheus metrics.</li>
<li>tzkt: Added ability to process realtime messages with lag.</li>
<li>tzkt: Added missing fields to the <code>HeadBlockData</code> model.</li>
<li>tzkt: Added <code>iter_...</code> methods to iterate over item batches.</li>
</ul>
<h3 id="fixed"><a class="header" href="#fixed">Fixed</a></h3>
<ul>
<li>config: Fixed default SQLite path (<code>:memory:</code>).</li>
<li>prometheus: Fixed invalid metric labels.</li>
<li>tzkt: Fixed pagination in several getter methods.</li>
<li>tzkt: Fixed data loss when <code>skip_history</code> option is enabled.</li>
<li>tzkt: Fixed crash in methods that do not support cursor pagination.</li>
<li>tzkt: Fixed possible OOM while calling methods that support pagination.</li>
<li>tzkt: Fixed possible data loss in <code>get_originations</code> and <code>get_quotes</code> methods.</li>
</ul>
<h3 id="changed"><a class="header" href="#changed">Changed</a></h3>
<ul>
<li>tzkt: Added <code>offset</code> and <code>limit</code> arguments to all methods that support pagination.</li>
</ul>
<h3 id="removed"><a class="header" href="#removed">Removed</a></h3>
<ul>
<li>bcd: Removed <code>bcd</code> datasource and config section.</li>
<li>cli: Removed <code>docker init</code> command.</li>
<li>cli: Removed dummy <code>schema approve --hashes</code> flag.</li>
<li>config: Removed dummy <code>advanced.oneshot</code> flag.</li>
</ul>
<h3 id="performance"><a class="header" href="#performance">Performance</a></h3>
<ul>
<li>dipdup: Use fast <code>orjson</code> library instead of built-in <code>json</code> where possible.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../release-notes/5.1.0.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../release-notes/4.2.0.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../release-notes/5.1.0.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../release-notes/4.2.0.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
