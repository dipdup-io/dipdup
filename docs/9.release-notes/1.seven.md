---
name: 7.0.0rc1
---
# Release Notes: 7.0.0rc1

Welcome, developers! Today we introduce the next major release DipDup 7.0. After half a year of active development, the amount of new features is huge, but we hope that updated docs and lots of examples won't let you get lost.

Key highlights:

- Support for EVM-compatible blockchains
- Python 3.11 environment, updated Docker images
- Improved indexing performance
- Storage layer improvements
- Flexible deployment recipes for Docker and Compose
- New convenient CLI commands

Join our [Discord](https://discord.gg/NbANhqCJHA) to discuss the release and ask questions.

## EVM support

Now DipDup support EVM-compatible blockchains in addition to Tezos. The new index allows you to process contract events from Ethereum, Binance Smart Chain, Polygon, and other EVM-compatible networks. DipDup fetches historical data from [Subsquid Archives](https://www.subsquid.io/), real-time data from RPC nodes, and ABIs from [Etherscan](https://etherscan.io/). All you need is to define an index in your config and implement handlers for each event.

We have two demo projects for EVM: a very basic USDt price indexer and a more complex one for Uniswap V3. Run `dipdup new` command, select "EVM" on the first step, and choose a template to use.

## Better onboarding experience

Our interactive installer was updated for better compatibility with pyenv and other Python tooling. The `new` command for creating new projects was also updated. It has a more convenient interface and includes EVM templates.

```shell [Terminal]
# Install DipDup
curl -Lsf https://dipdup.io/install.py | python

# Create a new project interactively
dipdup new
```

Package and config discovery was improvement, so managing a project is a bit easier now. You can omit default the `dipdup.yaml` filename and yml|yaml extension; packages in the current workdir are also correctly discovered.

```shell [Terminal]
dipdup -c . -c configs/dipdup.sqlite.yaml config export
```

Installer commands are now available as `dipdup self` command group. You can switch the release channel or uninstall DipDup at any time:

```shell
dipdup self install --version 7.0.0rc1
dipdup self install --force --ref next
dipdup self uninstall
```

## Environment and performance

DipDup projects now run on Python 3.11. That means significant performance improvements and better compatibility with modern Python tooling. Also you can use the latest Python syntax like assignment expressions and structural pattern matching.

DipDup now pre-fetches and buffers historical data when possible to increase processing speed. DipDup ORM was also updated to improve query performance and schema uniformity between database engines.

Our Docker images are now based on Debian 12. They are simple, secure and easy to extend. Alpine images are no longer published, but migration should be seamless.

Check the [Docker](../6.deployment/2.docker.md) page in docs for details.

## DipDup ORM

We continue to improve our storage layer based on Tortoise ORM, which we refer to as DipDup ORM. 7.0 release brings improved query performance, better schema uniformity between database engines, and new field types.

Since DipDup 7.0 models are defined like this (note the changed imports):

```python
from dipdup import fields
from dipdup import models


class User(models.Model):
    name = fields.TextField(pk=True)
```

Check the [Models](../1.getting-started/5.models.md) page in docs for details.

## Project package

Project package scructure was significantly updated, now it's more convenient to use and understand. All sections are created on init.

DipDup package now includes three new sections:

- `models` replaces `models.py` module as a source of DipDup ORM models. You can use any structure inside; models will be discovered automatically.
- `configs` directory contains env-specific configs to combine with the root config. Use them to define different settings for different environments and make your config more readable and declarative.
- `deploy` directory contains Dockerfile, Compose stacks and other deployment recipes. Also there are `.env.default` files for each config in `configs` directory. So you'll never miss a variable again!

New `dipdup package tree` command allows to inspect the package structure and ensure that everything is in place.

Check the [Package](../1.getting-started/4.package.md) page in docs for details.

## Miscellaneous

Here are some other notable changes not covered above:

- Saved crash and performance reports in the home directory can be viewed with new `report` and `report show` commands.
- Logging is now fully customizable from config. See [Logging](../6.deployment/5.logging.md) page in docs for details.

## Migration from 6.5

::banner{type="warning"}
7.0.0rc1 is the first release candidate; this guide may change before the final release.
::

Perform the following steps to migrate your project to 7.0:

1. Update your environment to Python 3.11. Install DipDup 7.0.0rc1 using our installer or manually.
2. Run `dipdup new` command, choose empty template `demo_blank`.
3. Move your old config to the new project. Update it using the guide below.
4. Run `dipdup init` command. It will generate a new package structure. Commit the changes.
5. Move your code from existing hooks and handlers to the freshly generated stubs. Keep an eye on imports and model attributes.
6. Move SQL scripts, GraphQL queries and other metadata.
7. Run `pdm all` to run linters and formatters.

### Config changes

1. Set `spec_version` to `2.0`.
2. Add `kind: tezos` or `kind: evm` to contract definitions.
3. Update `kind` field of index and datasource configs according to the table below.
4. Remove `advanced.crash_reporting` and `advanced.metadata_interface` feature flags from your config if presented.

### Renamings

|             | 6.5         | 7.0                     |
| ----------- | ----------- | ----------------------- |
| datasources | `tzkt`      | `tezos.tzkt`           |
|             | ...         |                         |
| indexes     | `operation` | `tezos.tzkt.operations` |
|             | ...         |                         |
