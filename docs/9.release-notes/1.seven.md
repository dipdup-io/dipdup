---
name: 7.0.0rc1
---
# Release Notes: 7.0.0rc1

Welcome, developers! Today we introduce the next major release DipDup 7.0. After half a year of active development, the amount of new features is huge, but we hope that updated docs and lots of examples won't let you get lost.

Key highlights:

- Support for EVM-compatible blockchains.
- Updated Python 3.11 environment.
- Improved indexing performance.
- Flexible deployment recipes for any environment.
- New convenient CLI commands.

## EVM support

Now DipDup support EVM-compatible blockchains in addition to Tezos. The new index allows you to process contract events from Ethereum, Binance Smart Chain, Polygon, and other EVM-compatible networks. DipDup fetches historical data from [Subsquid Archives](https://www.subsquid.io/), real-time data from RPC nodes, and ABIs from [Etherscan](https://etherscan.io/). All you need is to define an index in your config and implement handlers for each event.

We have two demo projects for EVM: a very basic USDt price index er and a more complex one for Uniswap V3. Run `dipdup new` command, select "EVM" on the first step, and choose a template to use.

## Better onboarding experience

Our interactive installer was updated for better compatibility with pyenv and other Python tooling. You need only one command to install DipDup for the current user:

```shell
curl -Lsf https://dipdup.io/install.py | python
```

Installer commands are now available as `dipdup self` command group. You can switch the release channel or uninstall DipDup at any time:

```shell
dipdup self install --version 7.0.0rc1
dipdup self install --force --ref next
dipdup self uninstall
```

The `new` command for creating new projects was also updated. It has a more convenient interface and supports EVM templates.

(okay: screenshot; dope: asciinema)

(links: Installation)

## Environment and performance

DipDup projects now run on Python 3.11. That means significant performance improvements and better compatibility with modern Python tooling. Also you can use the latest Python syntax like assignment expressions and structural pattern matching.

DipDup now pre-fetches and buffers historical data when possible to increase processing speed. DipDup ORM was also updated to improve query performance and schema uniformity between database engines.

Our Docker images are now based to Debian 12. They are simple, secure and easy to extend. Alpine images are no longer published, but migration should be seamless. Check the [Docker]() page in docs for details.

## DipDup ORM

We continue to improve our storage layer based on Tortoise ORM, which we refer to as DipDup ORM. 7.0 release brings improved query performance, better schema uniformity between database engines, and new field types.

Since DipDup 7.0 models are defined like this (note the changed imports):

```python
from dipdup import fields
from dipdup import models


class User(models.Model):
    name = fields.TextField(pk=True)
```

Check the [Models]() page in docs for details.

## Project package

[Project package](../1.getting-started/4.package.md) was significantly updated, now it's more convenient to use and understand.

DipDup package now includes three new sections:

- `models` replaces `models.py` file and contains DipDup ORM models. You can use any structure there; models will be discovered automatically.
- `configs` directory contains env-specific configs to combine with the root config. You can use it to define different settings for different environments.
- `deploy` directory contains Dockerfile, Compose stacks and other deployment recipes. Also there are `.env.default` files with default environment variables for each deployment.

New `dipdup package tree` command has been added allowing to inspect the package structure. Try it in your project:

```shell
# Create a new empty package
$ dipdup new -q; cd dipdup_indexer

# Initialize the project; run `package tree` command to inspect the structure
$ dipdup init
$ dipdup package tree

dipdup_indexer [.]
├── abi
├── configs
│   ├── dipdup.compose.yaml
│   ├── dipdup.sqlite.yaml
│   ├── dipdup.swarm.yaml
│   └── replay.yaml
├── deploy
│   ├── .env.default
│   ├── Dockerfile
│   ├── compose.sqlite.yaml
│   ├── compose.swarm.yaml
│   ├── compose.yaml
│   ├── sqlite.env.default
│   └── swarm.env.default
├── graphql
├── handlers
├── hasura
├── hooks
│   ├── on_index_rollback.py
│   ├── on_reindex.py
│   ├── on_restart.py
│   └── on_synchronized.py
├── models
│   └── __init__.py
├── sql
├── types
├── py.typed
├── __init__.py
└── pyproject.toml
```

## Misc

Here are some other notable changes not covered above:

- Saved crash reports in the home directory can be viewed with new `report` and `report show` commands.
- Logging is now fully customizable from config see [Logging]() page in docs.
- New commands were added to manage crash reports: `report`, `report show` and `report rm`.

## Migration from 6.5

7.0.0rc1 is the first release candidate. We will publish a detailed migration guide after the final release. For now, you can use the following checklist to migrate your project:

1. Update your environment to Python 3.11. Install DipDup 7.0.0rc1 using our installer or manually.
2. Run `dipdup new` command, choose `demo_blank` template.
3. Move your old config to the new project. Update it using the guide below.
4. Run `dipdup init` command. It will generate a new package structure.
5. Move your code from existing hooks and handlers to the freshly generated stubs.
6. Move SQL scripts, QraphQL queries and other files.
7. Run `pdm all` to run linters and formatters.

### Config changes

1. Set `spec_version` to `2.0`.
2. Add `kind: tezos` or `kind: evm` to the contract definitions.
3. Update `kind` field of index and datasource configs. See the table below.
4. Remove `advanced.crash_reporting` and `advanced.metadata_interface` feature flags from your config if presented.

### Renamings

|             | 6.5         | 7.0                     |
| ----------- | ----------- | ----------------------- |
| datasources | `tzkt`      | `tezos.tzkt`           |
|             | ...         |                         |
| indexes     | `operation` | `tezos.tzkt.operations` |
|             | ...         |                         |
