---
title: 7.1.0
description: DipDup 7.1 release notes
---

# Release Notes: 7.1

Welcome, developers!

After maybe-too-long awaited 7.0 release we decided to establish shorter and more predictable release cycle.

~~So, there are no groundbreaking features in this release, but many~~

~~Instead, we focused on improving the developer experience and making DipDup more stable and reliable~~

## New index: Tezos token balanses

Like token transfers. Even simplier. Only current values. Like bigmaps with `skip_history`.

## SQL helpers to manage database schema

 - dipdup_wipe, dipdup_approve.

new functions.

updated SQL page. Scripts, queries, how to parametrize.

## More `config env` command options

Managing environment variables could be a pain, still it's an important part of a modern 12-factor application. Try to keep your project config completely environment-agnostic to make deploy easier and ensure secrets are safe. This release brings a few new options to the `config env` command to make it easier to work with environment variables.

Compose stack definitions in `deploy` package directory include environment variables from `.env` files (generated with `config env` command without arguments). New `--compose, -c` flag also allows exporting config variables in Compose format. Copy necessary strings from the output to the `environment` section of the service definition and you're good to go.

```shell [Terminal]
$ dipdup config env --compose
services:
  dipdup:
    environment:
      - API_KEY=${API_KEY}
      - API_URL=${API_URL:-https://api.example.com}
```

`--internal, -i` flag allows including internal variables (with `DIPDUP_` prefix) in the command output. All of them are optional and rarely needed, but very useful for debugging. See the [Feature Flags](../5.advanced/2.feature-flags.md) page for the full list of internal variables.

```shell [Terminal]
$ dipdup config env --internal
DIPDUP_CI=
DIPDUP_DEBUG=
DIPDUP_DOCKER=
DIPDUP_NEXT=
DIPDUP_REPLAY_PATH=
DIPDUP_TEST=
```

You could notice a new variable here, `DIPDUP_DEBUG`. Setting it to true will increase logging verbosity (equal to `logging: debug` in config) and enable some additional checks. Make sure that this flag is set if you're gathering logs for a bug report.

Finally, `--unsafe` flag allows exporting environment variables from the current shell session. Missing short option is intentional to prevent accidental usage. Missing example output here is also intentional, because it's, you know, unsafe to share your secrets. Don't do that.

## Improved base template

- pdm scripts.
- replay files

We ship basic QA tools.

```shell
$ pdm run -l
╭────────┬───────────┬──────────────────────────────────╮
│ Name   │ Type      │ Description                      │
├────────┼───────────┼──────────────────────────────────┤
│ all    │ composite │ Run all checks                   │
│ format │ composite │ Format code with isort and black │
│ image  │ cmd       │ Build Docker image               │
│ lint   │ composite │ Check code with ruff and mypy    │
╰────────┴───────────┴──────────────────────────────────╯
```

Integrate into CI (example action)

Here's a minimal 

```yaml [.github/workflows/test.yml]
      - name: Install PDM
        run: pipx install pdm

      - name: Set up Python
        uses: actions/setup-python@main
        with:
          python-version: '3.11'
          cache: 'pip'

      - name: Install project dependencies
        run: pdm install

      - name: Run all checks
        run: pdm all
```

To update pyproject.toml in existing project.

Limit the scope of `init` command.

...


`dipdup init --force pyproject.toml`

include replay